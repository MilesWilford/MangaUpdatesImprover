var Monitor=function(){function c(){var g={urls:["<all_urls>"],types:["main_frame"]};var d=new Delegate();var h=false;var f=function(i){if((i.url.indexOf("http")>=0)&&(i.frameId==0)){i.requestUrl=i.url;d.invoke(i);}};var e=function(){chrome.webNavigation.onBeforeNavigate.addListener(function(i){return f(i);},g);h=true;};return{addListener:function(i){if(i&&typeof(i.callback)==="function"){if(!h){e();}return d.addObserver(i.callback);}return null;},removeListener:function(i){d.removeObserver(i);}};}function a(){var h={urls:["<all_urls>"]};var g=[301,302,303,307];var d=new Delegate();var i=false;var e=function(j){if(g.indexOf(j.statusCode)>=0){j.requestUrl=j.url;d.invoke(j);}};var f=function(){chrome.webRequest.onBeforeRedirect.addListener(function(j){return e(j);},h);i=true;};return{addListener:function(j){if(j&&typeof j.callback==="function"){if(!i){f();}return d.addObserver(j.callback);}return null;},removeListener:function(j){d.removeObserver(j);}};}var b=function(){var g={urls:["<all_urls>"]};var d=new Delegate();var h=false;var f=function(i){d.invoke(i);};var e=function(){chrome.webRequest.onBeforeRequest.addListener(function(i){if(i.tabId<0){_details={requestUrl:i.url,requestMethod:i.method};f(_details);return;}chrome.tabs.get(i.tabId,function(j){if(i.type=="sub_frame"){if(typeof Crossrider!=="undefined"&&Crossrider.hasOwnProperty("_framesUrlsByIds")){if(typeof Crossrider._framesUrlsByIds[i.tabId]==="undefined"){Crossrider._framesUrlsByIds[i.tabId]={};}Crossrider._framesUrlsByIds[i.tabId][i.frameId]=i.url;}}_details={tabId:i.tabId,requestUrl:i.url,iframeUrl:(Crossrider._framesUrlsByIds[i.tabId]&&Crossrider._framesUrlsByIds[i.tabId][i.frameId])?Crossrider._framesUrlsByIds[i.tabId][i.frameId]:null,pageUrl:j.url,requestMethod:i.method};f(_details);});},g);h=true;};return{addListener:function(i){if(i&&typeof i.callback==="function"){if(!h){e();}return d.addObserver(i.callback);}return null;},removeListener:function(i){d.removeObserver(i);}};};return{onBeforeNavigate:c(),onRedirect:a(),onRequest:b()};};
